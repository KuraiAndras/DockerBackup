@page "/backups"

@inherits LoadingComponent

<MudIconButton Icon="@Icons.Material.Filled.Cached" title="refresh" OnClick="@Refresh" />

<MudTable T="ListContainerBackupResponse" Items="@_backups" Hover="true" SortLabel="Sort By" Loading="@Loading"
    OnRowClick="BackupClicked">
    <HeaderContent>
        <MudTh>
            <MudTableSortLabel InitialDirection="SortDirection.Ascending"
                SortBy="new Func<ListContainerBackupResponse, object>(x=>x.ContainerName)">
                Name
            </MudTableSortLabel>
        </MudTh>
        <MudTh>
            <MudTableSortLabel InitialDirection="SortDirection.Ascending"
                SortBy="new Func<ListContainerBackupResponse, object?>(x=>x.LastBackupAt)">
                Last Backup
            </MudTableSortLabel>
        </MudTh>
        <MudTh>
            <MudTableSortLabel InitialDirection="SortDirection.Ascending"
                SortBy="new Func<ListContainerBackupResponse, object?>(x=>x.NumberOfBackups)">
                Count
            </MudTableSortLabel>
        </MudTh>
        <MudTh>
            <MudTableSortLabel InitialDirection="SortDirection.Ascending"
                SortBy="new Func<ListContainerBackupResponse, object?>(x=>x.SizeInBytes)">
                Size
            </MudTableSortLabel>
        </MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Name">@context.ContainerName</MudTd>
        <MudTd DataLabel="ID">@context.LastBackupAt</MudTd>
        <MudTd DataLabel="Image">@context.NumberOfBackups</MudTd>
        <MudTd DataLabel="Size">@UnitHelper.HumanReadableSize(context.SizeInBytes)</MudTd>
    </RowTemplate>
</MudTable>
